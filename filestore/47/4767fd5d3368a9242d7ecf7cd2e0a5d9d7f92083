
import {GET_FORM,GET_FORM_FAILURE,GET_FORM_SUCCESS,
  CREATE_FORM_ENTRIE,CREATE_FORM_ENTRIE_SUCCESS,CREATE_FORM_ENTRIE_FAILURE,
  SUBMIT_FORM,SUBMIT_FORM_SUCCESS,SUBMIT_FORM_FAILURE,
 } from '../actions/user';

const initialState={
 title:'',
 entrie:'',
 success:'',
 error:'',
 list_entries:[],
 list_entries_spinner:false,
 list_entries_error:false,
 list_entries_count:null, 
 list_entries_next:null, 
 list_entries_previous:null,
 fields:[],
 submit_response:{},
 form_builder:{
   error: null,
   schema: {
     type: "object",
     title: "Untitled form",
     description: "Enter some description for your form here",
     properties: {}
   },
   uiSchema: {
     "ui:order": []
   },
   formData: {},
   currentIndex: 0
 }
,
spinner_status:false,
get_statistics:{},
get_statistics_spinner:false,
get_statistics_error:null,
submission_number:{},
remove_entry_spinner:false,
remove_entry_message:null,
edit_entry_spinner:false,
edit_entry_message:null,
edit_entry_error:null,
draft_form:[],
get_form_error:null
}

export function dynamicform (state=initialState, action){
 switch(action.type){
   case `RESET_EDIT_SUCCESS_MESSAGE`:
     return {
       ...state,edit_entry_message:null 
     }
   case 'HANDLE_EDIT_FORM_ENTRY':
     return {
       ...state, edit_entry_error:null, edit_entry_message:null, edit_entry_spinner:true
     }
   case 'EDIT_FORM_ENTRY':
     return {
       ...state, edit_entry_error:null, edit_entry_message:action.payload.message, edit_entry_spinner:false
     }
   case 'EDIT_FORM_ENTRY_FAILURE':
     return {
      ...state, edit_entry_error:action.payload.error, edit_entry_message:null, edit_entry_spinner:false
     }
   case `HANDLE_GET_ENTRY_DETAILS`:
     return {
       ...state, draft_form:[]
     }
   case 'GET_ENTRY_DETAILS':
     return {
       ...state, draft_form:action.payload.fields
     }
   case `RESET_SUCCESS_MESSAGE`:
     return {
      ...state,remove_entry_message:null
     }
  case `RESET_ERROR_MESSAGE`:
     return {
      ...state,remove_entry_error:null
     }
   case 'HANDLE_REMOVE_PARTICIPATION_ENTRY':
     return {...state, remove_entry_spinner:true, remove_entry_message:null}
   case 'REMOVE_PARTICIPATION_ENTRY':
     return {...state, remove_entry_spinner:false, remove_entry_message:action.payload.message}
   case GET_FORM:
      return{...state,title:action.payload.title, fields: action.payload.fields, spinner_status:false }
   case GET_FORM_SUCCESS:
      return {...state, success: action.payload.message, error:'', spinner_status:false}
   case GET_FORM_FAILURE:
       return {...state, get_form_error: action.payload.error, success:'', spinner_status:false}
   case CREATE_FORM_ENTRIE:
      return {...state, entrie:action.payload.id}
   case CREATE_FORM_ENTRIE_SUCCESS:
      return {...state, success: action.payload.success, error:''}
   case CREATE_FORM_ENTRIE_FAILURE:
      return {...state, error: action.payload.error, success:'', spinner_status:false}
   case 'HANDLE_GET_FORM':
      return {...state, spinner_status:true, success:null, error:null}
   case 'HANDLE_SUBMIT_FORM':
      return {...state, spinner_status:true, success:null, error:null}
   case SUBMIT_FORM:
      return {...state,submit_response:action.payload, spinner_status:false}
   case SUBMIT_FORM_SUCCESS:
        return {...state, success: action.payload.message, error:'', spinner_status:false}
   case SUBMIT_FORM_FAILURE:
        return {...state, error: action.payload.error, success:'', spinner_status:false}

   case 'GET_PARTICIPANTS_LIST':
       return{...state, list_entries_error: null, success:'', list_entries_spinner:false,
                        list_entries:action.payload.results, 
                        list_entries_count:action.payload.count, 
                        list_entries_next:action.payload.next, 
                        list_entries_previous:action.payload.previous,
              }
  case 'GET_PARTICIPANTS_LIST_FAILURE':
       return{...state, list_entries_error: action.payload.error, success:'', list_entries_spinner:false, list_entries:[]}
  
  case 'HANDLE_GET_PARTICIPANTS_LIST':
       return{...state, list_entries_error:null, success:'', list_entries_spinner:true, list_entries:[]}
  

  case 'GET_STATISTICS':
       return{...state, get_statistics_error: null, success:'', get_statistics_spinner:false, get_statistics:action.payload}
  case 'GET_STATISTICS_FAILURE':
       return{...state, get_statistics_error: action.payload.error, success:'', get_statistics_spinner:false, get_statistics:[]}
  
  case 'HANDLE_GET_STATISTICS':
       return{...state, get_statistics_error:null, success:'', get_statistics_spinner:true, get_statistics:[]}
  case 'GET_FORM_DATA':
    return {...state, submission_number:action.payload}
   default:
      return state
 }
}

