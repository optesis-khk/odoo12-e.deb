import React, { Component } from 'react'
import Contact from './forms/Contact'
import { initSession, resetUserSession, updateAPILanguage } from '../actions/user'
import {connect } from 'react-redux';
import { DEBUG} from '../config';
import { logError } from '../utils';

class ContactPage extends Component {

  componentWillMount(){
    // this.startErrorLog();
    this.props.initSession(this.props.location);
  }

    startErrorLog() {

    if(!DEBUG) { // in prodution, we log all errors and hide console logs
      console.log = function() {}
      console.log("window.onerror started")
      window.onerror = (message, file, line, column, errorObject) => {
        console.log("window.onerror caught")
        column = column || (window.event && window.event.errorCharacter);
        let stack = errorObject ? errorObject.stack : null;

        // trying to get stack from IE
        // if(!stack) {
        //   stack = [];
        //   let f = arguments.callee.caller;
        //   while (f) {
        //     stack.push(f.name);
        //     f = f.caller;
        //   }
        //   errorObject['stack'] = stack;
        // }

        const store = window.store.getState()

        const body = {
          message:message,
          file:file,
          line:line,
          column:column,
          errorStack:stack,
          form: store.form,
          userId: "userId : " + store.user.userId + "userStatus : " + store.user.status + "userError : " + store.user.error + "userAccount : " + store.user.accountType,
        };

        logError(window.location.href, JSON.stringify(body, null, 2))

        // the error can still be triggered as usual, we just want to know what's happening on the client side
        return false;
      }
    }
  }
  render() {
    return (
      <div>
        <div id="contact">
      <div className="container p-4 py-lg-5 ">
        <div data-animate="fadeIn" >
         
        </div>
        <div className="row " data-animate="fadeIn">
          <div className="col-md-8 mb-5 nous_contacter">
            
            <h2 className="text-center text-uppercase font-weight-bold my-0 parcours">
            Nous contacter
          </h2>
          <hr className="hr-lg mt-0 mb-3 w-10 mx-auto hr-primary" />
          <br/>
           <Contact/>
          </div>
          <div className="col-md-4 sidebar side_contact">
            <h5 className="mb-1 font-weight-bold text-center">
              Contact
            </h5>
            <hr/>
            <p className="mb-1">
                <h4 className="mb-1 font-weight-bold">
              A Dakar
                </h4>
                  <abbr title="Address"><i className="fa fa-home pr-2"></i></abbr> Club de lâ€™union, petite corniche Dakar 
                 
                </p>
                <p className="mb-0">
                  <abbr title="Email"><i className="fa fa-phone pr-2"></i></abbr>+221 78 242 11 11
                </p>
              
                <p className="mb-0">
                  <abbr title="Email"><i className="fa fa-envelope pr-2"></i></abbr>contact@semimarathonsomone.org
                </p>
                <div className="socials">
                <a href="https://twitter.com/MarathonSomone" target="_blank" className="btn btn-sm btn-icon btn-dark btn-rounded"><i className="fab fa-twitter"></i></a>
            <a href="https://www.facebook.com/MarathonSomone" target="_blank" className="btn btn-sm btn-icon btn-dark btn-rounded"><i className="fab fa-facebook-f"></i></a>
            <a href="https://www.instagram.com/MarathonSomone/" target="_blank" className="btn btn-sm btn-icon btn-dark btn-rounded"><i className="fab fa-instagram"></i></a>
            </div>
                <hr/>



              
             
          
      </div>
            


          </div>
   
        </div>
      </div>
    </div>

    )
  }
}
export default connect(null, { initSession, resetUserSession, updateAPILanguage })(ContactPage);
